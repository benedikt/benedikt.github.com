function $(e){return document.getElementById(e)}function $$(e){return document.querySelector(e)}function $$$(e){return document.querySelectorAll(e)}function updateStats(e,t){$$("#"+e+" .value").innerHTML=t}function incrementStats(e){var t=$$("#"+e+" .value");t.innerHTML=1*t.innerHTML+1}function logEvent(e){var t=document.createElement("span");t.className=e.type,t.innerHTML="["+e.type+"] ",t.innerHTML+="Touches: ";var n=[];for(var r=0;r<e.touches.length;r++){var i=e.touches[r];n.push("&lt;id: "+i.identifier+", x: "+i.pageX+", y: "+i.pageY+"&gt;")}t.innerHTML+="["+n.join(", ")+"] ["+e.touches.length+"], ",t.innerHTML+="Changed: "+e.changedTouches.length;var s=$("console");s.appendChild(t),t.scrollIntoView()}window.onload=function(){function n(e){e.preventDefault()}var e=[],t=$("tracking");document.addEventListener("touchstart",n,!1),document.addEventListener("touchmove",n,!1),document.addEventListener("touchend",n,!1),t.addEventListener("touchstart",function(n){logEvent(n),incrementStats("touchstarts"),updateStats("state","start"),updateStats("touches",n.touches.length);for(var r=0;r<n.changedTouches.length;r++){var i=n.changedTouches[r];if(!e[i.identifier]){var s=document.createElement("div");s.className="touch",s.style.webkitTransform="translate3d("+i.pageX+"px, "+i.pageY+"px, 0px)",t.appendChild(s),e[i.identifier]=s}}n.preventDefault()},!1),t.addEventListener("touchmove",function(t){logEvent(t),incrementStats("touchmoves"),updateStats("state","move");for(var n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n],i=e[r.identifier];i.style.webkitTransform="translate3d("+r.pageX+"px, "+r.pageY+"px, 0px)"}t.preventDefault()},!1),t.addEventListener("touchend",function(n){logEvent(n),incrementStats("touchends"),updateStats("state","end"),updateStats("touches",0),t.innerHTML="",e=[],n.preventDefault()},!1);var r="createTouch"in document;$("resetButton").addEventListener(r?"touchend":"click",function(e){window.location.reload(),e.preventDefault()},!0),$("settingsButton").addEventListener(r?"touchend":"click",function(e){var t=$("settings"),n=$("settingsButton");n.className.match(/active/)?(t.style.display="none",n.className=n.className.replace(/ active/,"")):(t.style.display="block",n.className+=" active")},!0),$("consoleButton").addEventListener(r?"touchend":"click",function(e){var t=$("console"),n=$("consoleButton"),r=$("stats");n.className.match(/active/)?(t.style.height=r.style.bottom="0px",n.className=n.className.replace(/ active/,"")):(t.style.height=r.style.bottom="200px",n.className+=" active"),e.preventDefault()},!0);var i=$$$(".toggleButton");for(var s=0;s<i.length;s++){var o=i[s];o.addEventListener(r?"touchend":"click",function(e){return function(t){var n=document.documentElement;e.className.match(/ on/)?(e.className=e.className.replace(/ on/,""),e.className+=" off",n.className=n.className.replace(" "+e.id,"")):(e.className+=" on",e.className=e.className.replace(/ off/,""),n.className+=" "+e.id)}}(o),!0)}};